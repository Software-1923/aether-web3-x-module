"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.writeReadableStreamToWritable = void 0;
async function writeReadableStreamToWritable(stream, writable) {
    let reader = stream.getReader();
    async function read() {
        let { done, value } = await reader.read();
        if (done) {
            writable.end();
            return;
        }
        writable.write(value);
        await read();
    }
    try {
        await read();
    }
    catch (error) {
        writable.destroy(error);
        throw error;
    }
}
exports.writeReadableStreamToWritable = writeReadableStreamToWritable;
/**
 * Credits:
 *   - https://github.com/remix-run/remix/blob/e77e2eb/packages/remix-node/stream.ts
 */
